CREATE TABLE ROL (
	ID INT NOT NULL,
	Descripcion VARCHAR(30) NOT NULL,
	Activo bit NOT NULL,
	PRIMARY KEY(ID)
	
);

CREATE TABLE COMPAÑIA (
	ID INT NOT NULL,
	Nombre VARCHAR(30) NOT NULL,
	Activo bit NOT NULL,
	PRIMARY KEY(ID)
);

CREATE TABLE SUCURSAL (
	ID SERIAL PRIMARY KEY NOT NULL,
	CedAdmin INT,
    IDCompañia INT,
	Nombre VARCHAR(30) NOT NULL,
	Descripcion VARCHAR(30) NOT NULL,
	Provincia VARCHAR(50) NOT NULL,
	Canton VARCHAR(50) NOT NULL,
	Distrito VARCHAR(50) NOT NULL,
	Indicaciones VARCHAR(120) NOT NULL,
	Activo bit NOT NULL
);

CREATE TABLE EMPLEADO(
	Cedula INT NOT NULL,
	FNacimiento DATE NOT NULL,
	Contraseña VARCHAR(20) NOT NULL,
	Nombre1 VARCHAR(20) NOT NULL,
	Nombre2 VARCHAR(20),
	Apellido1 VARCHAR(20) NOT NULL,
	Apellido2 VARCHAR(20) NOT NULL,
	Provincia VARCHAR(50) NOT NULL,
	Canton VARCHAR(50) NOT NULL,
	Distrito VARCHAR(50) NOT NULL,
	Indicaciones VARCHAR(120) NOT NULL,
	Telefono INT,
	IDCompañia INT,
	IDSucursal INT,
	Activo BIT NOT NULL,
	PRIMARY KEY (Cedula)
	
);

CREATE TABLE ROL_EMPLEADO (
	ID SERIAL PRIMARY KEY,
	IDRol INT,
	CedulaEmpleado INT,
	Activo BIT NOT NULL
);



CREATE TABLE CLIENTE(
	Cedula INT NOT NULL,
	FNacimiento DATE NOT NULL,
	Contraseña VARCHAR(20) NOT NULL,
	Nombre1 VARCHAR(20) NOT NULL,
	Nombre2 VARCHAR(20),
	Apellido1 VARCHAR(20) NOT NULL,
	Apellido2 VARCHAR(20) NOT NULL,
	Provincia VARCHAR(50) NOT NULL,
	Canton VARCHAR(50) NOT NULL,
	Distrito VARCHAR(50) NOT NULL,
	Indicaciones VARCHAR(120) NOT NULL,
	Telefono INT,
	Activo BIT NOT NULL,
	PRIMARY KEY (Cedula)
);

CREATE TABLE MEDICAMENTO (
	EAN VARCHAR(30) NOT NULL,
	CasaFarmaceutica VARCHAR(30) NOT NULL,
	Prescripcion BIT NOT NULL,
	CantidadTotal VARCHAR(30) NOT NULL,
	Activo BIT NOT NULL,
	PRIMARY KEY(EAN)
);

CREATE TABLE SUC_MEDICAMENTO (
	ID SERIAL PRIMARY KEY,
	EANMedicamento VARCHAR(30),
	IDSucursal INT,
	Cantidad INT NOT NULL,
	Activo bit NOT NULL
);


CREATE TABLE VENTA(
	ID SERIAL PRIMARY KEY,
	NumCaja INT NOT NULL,
	CedCliente INT,
	Fecha DATE,
	TipoPago VARCHAR(50),
	Activo BIT NOT NULL
);

CREATE TABLE CONT_VENTA(
	ID SERIAL PRIMARY KEY,
	IDVenta INT,
	EANMedicamento VARCHAR(30),
	PrecioTotal INT,
	Cantidad INT,
	Activo BIT NOT NULL
);

CREATE TABLE APERTURA_CAJA(
	ID SERIAL PRIMARY KEY,
	NumCaja INT NOT NULL,
	CedCajero INT,
	Fecha DATE,
	Dinero INT,
	Activo BIT NOT NULL
);

CREATE TABLE CIERRE_CAJA(
	ID SERIAL PRIMARY KEY,
	IDApertura INT,
	VentaEfectivo INT,
	VentaTarjeta INT,
	DineroTotal INT,
	Activo BIT NOT NULL
);


ALTER TABLE CIERRE_CAJA
ADD CONSTRAINT APERTURAxCIERRE FOREIGN KEY (IDApertura) REFERENCES APERTURA_CAJA (ID);

ALTER TABLE APERTURA_CAJA
ADD CONSTRAINT EMPLEADOxAPERTURA FOREIGN KEY (CedCajero) REFERENCES EMPLEADO(Cedula);

ALTER TABLE CONT_VENTA
ADD CONSTRAINT VENTAxCONT_VENTA FOREIGN KEY (IDVenta) REFERENCES VENTA(ID);

ALTER TABLE CONT_VENTA
ADD CONSTRAINT MEDICAMENTOxCONT_VENTA FOREIGN KEY (EANMedicamento) REFERENCES MEDICAMENTO(EAN);

ALTER TABLE VENTA
ADD CONSTRAINT CLIENTExVENTA FOREIGN KEY (CedCliente) REFERENCES CLIENTE(Cedula);

ALTER TABLE SUC_MEDICAMENTO
ADD CONSTRAINT MEDICAMENTOxSUC_MEDICAMENTO FOREIGN KEY (EANMedicamento) REFERENCES MEDICAMENTO(EAN);

ALTER TABLE SUC_MEDICAMENTO
ADD CONSTRAINT SUCURSALxSUC_MEDICMANENTO FOREIGN KEY (IDSucursal) REFERENCES SUCURSAL(ID);

ALTER TABLE ROL_EMPLEADO
ADD CONSTRAINT ROLxROL_EMPLEADO FOREIGN KEY (IDRol) REFERENCES ROL(ID);

ALTER TABLE ROL_EMPLEADO
ADD CONSTRAINT EMPLEADOxROL_EMPLEADO FOREIGN KEY (CedulaEmpleado) REFERENCES EMPLEADO(CEDULA);

ALTER TABLE EMPLEADO
ADD CONSTRAINT COMPAÑIAxEMPLEADO FOREIGN KEY (IDCompañia) REFERENCES COMPAÑIA(ID);

ALTER TABLE EMPLEADO
ADD CONSTRAINT SUCURSALxEMPLEADO FOREIGN KEY (IDSucursal) REFERENCES SUCURSAL(ID);

ALTER TABLE SUCURSAL
ADD CONSTRAINT COMPAÑIAxSUCURSAL FOREIGN KEY (IDCompañia) REFERENCES COMPAÑIA(ID);

ALTER TABLE SUCURSAL
ADD CONSTRAINT EMPLEADOxSUCURSAL FOREIGN KEY (CedAdmin) REFERENCES EMPLEADO(Cedula);